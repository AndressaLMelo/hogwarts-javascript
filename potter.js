const prompt = require("prompt-sync")();

const personagem = [];
const casa = [];
const especie = [];

//---------------------------------FUN√á√ÉO DE INCLUIR------------------------
function incluir() {
  console.log("\n‚ú® Cadastro do Aluno em Hogwarts ‚ú®");
  console.log("-".repeat(80));

  //---------------------------------L√ìGICA DE VALIDA√á√ÉO DE NOME------------------------
  let nomePersonagem = "";
  while (true) {
    nomePersonagem = prompt("Nome do Aluno: ");
    if (nomePersonagem === "Edecio") {
      console.log("Nome ofensivo em Hogwarts! Escolha outro... üí•");
      continue;
    } else {
      break;
    }
  }

  //---------------------------------L√ìGICA DO CHAP√âU SELETOR------------------------
  console.log(" ");
  console.log("‚ú® Chap√©u Seletor ‚ú®");
  console.log(" ");

  const caracteristica = prompt(
    "Escolha sua principal caracter√≠stica (Coragem, Ambi√ß√£o, Intelig√™ncia, Gentileza): "
  );

  const casas = {
    coragem: "Grifinoria",
    ambicao: "Sonserina",
    inteligencia: "Corvinal",
    gentileza: "Lufa-Lufa",
  };

  //---------------------------------L√ìGICA DA ESP√âCIE------------------------
  console.log(" ");
  const especiePersonagem = prompt("Qual a Esp√©cie M√°gica do Aluno: ");

  //---------------------------------ADICIONA VALORES AOS VETORES------------------------
  personagem.push(nomePersonagem);
  casa.push(casas[caracteristica.toLowerCase()] || "Sem teto");
  especie.push(especiePersonagem);
  console.log(" ");
  console.log("‚ú® Fant√°stico! Novo aluno cadastrado com sucesso! ‚ú®");
}

//---------------------------------FUN√á√ÉO DE LISTAR------------------------
function listar() {
  console.log("\n‚ú®Listagem de Alunos‚ú®");
  console.log("-".repeat(80));
  console.log(
    "\nN¬∫ Nome ......................... Casa de Hogwarts ............. Esp√©cie"
  );
  console.log("-".repeat(80));

  for (let i = 0; i < personagem.length; i++) {
    console.log(
      ` ${i + 1} ${personagem[i].padEnd(30)} ${casa[i].padEnd(30)} ${especie[
        i
      ].padEnd(30)}`
    );
  }
}

//---------------------------------FUN√á√ÉO DE PESQUISAR POR CASA------------------------
function pesq_casa() {
  console.log("\nPesquisa por Casa");
  console.log("-".repeat(80));

  // .toUpperCase() converte para letras mai√∫sculas

  const pesqCasa = prompt(
    "Por qual Casa de Hogwarts deseja pesquisar?‚ö°Ô∏è "
  ).toUpperCase();

  console.log(
    "\nN¬∫ Nome............... Casa de Hogwarts.............. Esp√©cie"
  );
  console.log("-".repeat(80));

  let contador = 0;

  for (let i = 0; i < personagem.length; i++) {
    if (casa[i].toUpperCase() == pesqCasa) {
      console.log(
        ` ${i + 1} ${personagem[i].padEnd(30)} ${casa[i].padEnd(20)} ${
          especie[i]
        }`
      );
      contador = contador + 1;
    }
  }

  if (contador == 0) {
    console.log("üí•Aluno n√£o encontrado!üí•");
  }
}

//---------------------------------FUN√á√ÉO DE PESQUISAR POR ESPECIE------------------------
function pesq_especie() {
  console.log("\nPesquisa por Esp√©cie");
  console.log("-".repeat(80));

  const pesqEspecie = prompt(
    "Por qual Especie M√°gica deseja pesquisar? "
  ).toUpperCase();

  console.log(
    "\nN¬∫ Nome............... Casa de Hogwarts.............. Esp√©cie"
  );
  console.log("-".repeat(80));

  let contador = 0;

  for (let i = 0; i < personagem.length; i++) {
    if (especie[i].toUpperCase() == pesqEspecie) {
      console.log(
        ` ${i + 1} ${personagem[i].padEnd(30)} ${casa[i].padEnd(20)} ${
          especie[i]
        }`
      );
      contador = contador + 1;
    }
  }

  if (contador == 0) {
    console.log("üí•Aluno n√£o encontrado!üí•");
  }
}

//---------------------------------FUN√á√ÉO DE EXCLUIR------------------------

function excluir() {
  listar();
  console.log("\nExclus√£o de Alunos");
  console.log("=".repeat(40));
  const numExcluir = Number(prompt("N√∫mero do Aluno (0 para retornar): "));
  if (numExcluir == 0) {
    return;
  }

  if (numExcluir > personagem.length) {
    console.log("üí•Nenhum aluno n√£o encontrado!üí•");
    return;
  }
  const excluido = personagem.splice(numExcluir - 1, 1);
  casa.splice(numExcluir - 1, 1);
  especie.splice(numExcluir - 1, 1);

  console.log(
    "‚ú®Avada Kedavra! Aluno(a) " +
      excluido.toString() +
      " exclu√≠do com sucesso!‚ú®"
  );
}

//---------------------------------FUN√á√ÉO DE ESTAT√çSTICA------------------------
function estatistica() {
  console.log("\nEstat√≠stica do Cadastro de Alunos");
  console.log("=".repeat(40));

  if (personagem.length == 0) {
    console.log("üí•Nenhum aluno n√£o encontrado!üí•");
    return;
  }

  const numPersonagem = personagem.length;
  console.log("N√∫mero de alunos cadastrados: " + numPersonagem);
  console.log(".".repeat(40));
  console.log(" ");
  console.log("Quantidade de alunos por casa");
  console.log("-".repeat(40));

  let qtdGrif = 0;
  let qtdLuf = 0;
  let qtdCor = 0;
  let qtdSon = 0;

  for (let i = 0; i < casa.length; i++) {
    if (casa[i] === "Grifinoria") {
      qtdGrif++;
    } else if (casa[i] === "Lufa-Lufa") {
      qtdLuf++;
    } else if (casa[i] === "Corvinal") {
      qtdCor++;
    } else if (casa[i] === "Sonserina") {
      qtdSon++;
    }
  }
  console.log("Grifinoria ü¶Å: " + qtdGrif);
  console.log("Lufa-Lufa ü¶ù: " + qtdLuf);
  console.log("Cornival ü¶§: " + qtdCor);
  console.log("Sonserina üêç: " + qtdSon);
}

//---------------------------------PROGRAMA PRINCIPAL------------------------

do {
  console.log("\n‚ú®HOGWARTS‚ú®");
  console.log("-".repeat(80));
  console.log("1. Incluir Aluno");
  console.log("2. Listar Alunos");
  console.log("3. Pesquisar por Casa");
  console.log("4. Pesquisar por Esp√©cie");
  console.log("5. Excluir Alunos");
  console.log("6. Estat√≠stica de Personagens");
  console.log("7. Finalizar");

  const opcao = Number(prompt("Op√ß√£o: "));

  if (opcao == 1) {
    incluir();
  } else if (opcao == 2) {
    listar();
  } else if (opcao == 3) {
    pesq_casa();
  } else if (opcao == 4) {
    pesq_especie();
  } else if (opcao == 5) {
    excluir();
  } else if (opcao == 6) {
    estatistica();
  } else if (opcao == 7) {
    break;
  } else {
    console.log("üí•Op√ß√£o Inv√°lidaüí•");
  }
} while (true);
